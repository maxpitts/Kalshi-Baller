<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>YOLO ENGINE ‚Äî $100 to $10,000</title>
  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@300;400;500;600;700;800&family=Outfit:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
  <style>
    *{margin:0;padding:0;box-sizing:border-box}
    :root{--bg:#06060c;--bg2:#0c0c16;--bg3:#14142a;--bg4:#1c1c38;--border:#1e1e3a;--text:#e8e8f0;--dim:#555577;--muted:#33334d;--green:#00ff88;--gg:rgba(0,255,136,0.3);--red:#ff2266;--rg:rgba(255,34,102,0.3);--cyan:#00bbff;--cg:rgba(0,187,255,0.2);--yellow:#ffaa00;--purple:#8855ff;--pg:rgba(136,85,255,0.2)}
    body{font-family:'JetBrains Mono',monospace;background:var(--bg);color:var(--text);min-height:100vh;overflow-x:hidden;position:relative}
    .bg-grid{position:fixed;inset:0;background-image:linear-gradient(rgba(30,30,58,0.3) 1px,transparent 1px),linear-gradient(90deg,rgba(30,30,58,0.3) 1px,transparent 1px);background-size:60px 60px;z-index:0;animation:gridScroll 20s linear infinite}
    @keyframes gridScroll{to{background-position:60px 60px}}
    .bg-glow{position:fixed;width:600px;height:600px;border-radius:50%;filter:blur(150px);opacity:0.08;z-index:0;animation:floatG 15s ease-in-out infinite}
    .bg-glow.g1{top:-200px;left:-100px;background:var(--cyan)}.bg-glow.g2{bottom:-200px;right:-100px;background:var(--purple);animation-delay:-7s}
    @keyframes floatG{0%,100%{transform:translate(0,0) scale(1)}33%{transform:translate(40px,-30px) scale(1.1)}66%{transform:translate(-30px,20px) scale(0.9)}}
    #particles{position:fixed;inset:0;z-index:0;pointer-events:none}
    .content{position:relative;z-index:1}
    .header{display:flex;align-items:center;justify-content:space-between;padding:14px 28px;border-bottom:1px solid var(--border);background:rgba(6,6,12,0.85);backdrop-filter:blur(20px);position:sticky;top:0;z-index:10}
    .logo{display:flex;align-items:center;gap:14px}
    .logo-icon{font-size:26px;animation:spin 4s linear infinite}
    @keyframes spin{to{transform:rotate(360deg)}}
    .logo h1{font-family:'Outfit',sans-serif;font-size:20px;font-weight:800;letter-spacing:3px;background:linear-gradient(135deg,var(--cyan),var(--purple),var(--green));background-size:200% 200%;-webkit-background-clip:text;-webkit-text-fill-color:transparent;animation:gradShift 4s ease infinite}
    @keyframes gradShift{0%,100%{background-position:0% 50%}50%{background-position:100% 50%}}
    .logo .sub{font-size:10px;color:var(--dim);letter-spacing:1.5px}
    .header-right{display:flex;align-items:center;gap:10px}
    .state-badge{padding:5px 14px;border-radius:20px;font-size:10px;font-weight:700;letter-spacing:1.5px}
    .state-IDLE{background:var(--bg3);color:var(--dim)}.state-SCANNING{background:rgba(0,187,255,0.1);color:var(--cyan);border:1px solid rgba(0,187,255,0.3)}.state-BETTING{background:rgba(136,85,255,0.1);color:var(--purple);border:1px solid rgba(136,85,255,0.3);animation:pulseBorder 1.5s ease infinite}.state-WAITING{background:rgba(255,170,0,0.1);color:var(--yellow);border:1px solid rgba(255,170,0,0.3)}.state-TARGET_HIT{background:rgba(0,255,136,0.1);color:var(--green);border:1px solid rgba(0,255,136,0.3);animation:targetGlow 1.5s ease infinite}.state-SELF_DESTRUCTING{background:rgba(255,34,102,0.15);color:var(--red);border:1px solid rgba(255,34,102,0.4);animation:shake 0.2s infinite}.state-DEAD{background:rgba(255,34,102,0.05);color:#552233}.state-PAUSED{background:rgba(255,170,0,0.1);color:var(--yellow)}.state-ERROR{background:rgba(255,100,0,0.1);color:#ff6600}
    @keyframes pulseBorder{0%,100%{box-shadow:0 0 0 0 var(--pg)}50%{box-shadow:0 0 15px 3px var(--pg)}}
    @keyframes targetGlow{0%,100%{box-shadow:0 0 5px var(--gg)}50%{box-shadow:0 0 25px 5px var(--gg)}}
    @keyframes shake{0%,100%{transform:translateX(0)}25%{transform:translateX(-3px)}75%{transform:translateX(3px)}}
    .btn{padding:7px 14px;border:1px solid var(--border);border-radius:6px;background:var(--bg3);color:var(--dim);font-family:inherit;font-size:11px;font-weight:600;cursor:pointer;transition:all 0.2s;letter-spacing:0.5px}
    .btn:hover{border-color:var(--cyan);color:var(--cyan);box-shadow:0 0 12px var(--cg)}
    .btn.go{border-color:rgba(0,255,136,0.4);color:var(--green)}.btn.go:hover{background:var(--green);color:var(--bg);box-shadow:0 0 20px var(--gg)}
    .btn.danger{border-color:rgba(255,34,102,0.3);color:var(--red)}.btn.danger:hover{background:var(--red);color:white}
    .ticker-tape{border-top:1px solid var(--border);border-bottom:1px solid var(--border);background:var(--bg2);overflow:hidden;height:28px;display:flex;align-items:center}
    .ticker-content{display:flex;gap:40px;white-space:nowrap;animation:tickerScroll 30s linear infinite;font-size:10px;color:var(--dim);letter-spacing:1px}
    @keyframes tickerScroll{from{transform:translateX(0)}to{transform:translateX(-50%)}}
    .ticker-item{display:flex;gap:8px;align-items:center}.ticker-dot{width:4px;height:4px;border-radius:50%}.ticker-dot.g{background:var(--green)}.ticker-dot.c{background:var(--cyan)}
    .top-bar{display:flex;border-bottom:1px solid var(--border);background:rgba(12,12,22,0.6);backdrop-filter:blur(10px)}
    .top-stat{flex:1;padding:20px 24px;border-right:1px solid var(--border)}.top-stat:last-child{border-right:none}
    .top-stat-label{font-size:9px;letter-spacing:2.5px;color:var(--dim);text-transform:uppercase;margin-bottom:8px;display:flex;align-items:center;gap:6px}
    .cd-digits{font-family:'Outfit',sans-serif;font-size:48px;font-weight:800;letter-spacing:3px;font-variant-numeric:tabular-nums}
    .cd-digits.critical{color:var(--red);text-shadow:0 0 30px var(--rg)}.cd-digits.warning{color:var(--yellow)}.cd-digits.normal{color:var(--cyan);text-shadow:0 0 20px var(--cg)}
    .cd-digits .sep{opacity:0.4;animation:blink 1s step-end infinite}@keyframes blink{50%{opacity:1}}
    .cd-label{font-size:9px;letter-spacing:3px;color:var(--dim);margin-top:6px}
    .time-bar{width:100%;height:3px;background:var(--bg4);border-radius:2px;margin-top:14px;overflow:hidden}
    .time-bar-fill{height:100%;border-radius:2px;transition:width 1s linear;position:relative}
    .bv{font-family:'Outfit',sans-serif;font-weight:800;font-variant-numeric:tabular-nums;transition:all 0.3s}.bv.profit{color:var(--green);text-shadow:0 0 30px var(--gg)}.bv.loss{color:var(--red);text-shadow:0 0 30px var(--rg)}.bv.neutral{color:var(--text)}
    .flash-g{animation:flashG 0.5s ease}.flash-r{animation:flashR 0.5s ease}@keyframes flashG{0%{text-shadow:0 0 40px var(--green)}}@keyframes flashR{0%{text-shadow:0 0 40px var(--red)}}
    .pnl{display:inline-block;padding:3px 10px;border-radius:12px;font-size:11px;font-weight:600}.pnl.up{background:rgba(0,255,136,0.1);color:var(--green)}.pnl.down{background:rgba(255,34,102,0.1);color:var(--red)}.pnl.flat{background:var(--bg3);color:var(--dim)}
    .target-track{width:100%;height:8px;background:var(--bg4);border-radius:4px;margin-top:12px;overflow:hidden}
    .target-fill{height:100%;background:linear-gradient(90deg,var(--cyan),var(--green));border-radius:4px;transition:width 0.8s cubic-bezier(0.23,1,0.32,1);position:relative}
    .target-fill::after{content:'';position:absolute;inset:0;background:linear-gradient(90deg,transparent,rgba(255,255,255,0.2),transparent);animation:shimmer 2s ease-in-out infinite}@keyframes shimmer{0%{transform:translateX(-100%)}100%{transform:translateX(100%)}}
    .wl-bar{display:flex;height:4px;border-radius:2px;overflow:hidden;margin-top:6px;gap:2px}.wl-bar .w{background:var(--green);flex:1;border-radius:2px}.wl-bar .l{background:var(--red);flex:1;border-radius:2px}
    .main-grid{display:grid;grid-template-columns:1fr 1fr;gap:1px;background:var(--border)}
    .panel{background:var(--bg);padding:24px}
    .panel-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:16px}
    .panel-title{font-size:9px;letter-spacing:2.5px;color:var(--dim);text-transform:uppercase;display:flex;align-items:center;gap:8px}
    .live-dot{width:6px;height:6px;background:var(--green);border-radius:50%;animation:livePulse 2s ease infinite}@keyframes livePulse{0%,100%{box-shadow:0 0 0 0 var(--gg)}50%{box-shadow:0 0 0 6px transparent}}
    .chart-panel{grid-column:1/-1;min-height:260px}
    .chart-wrap{width:100%;height:220px;position:relative;overflow:hidden;border-radius:8px;background:var(--bg2);border:1px solid var(--border)}
    #plChart{width:100%;height:100%}
    .chart-overlay{position:absolute;top:12px;left:16px;pointer-events:none}
    .chart-price{font-family:'Outfit',sans-serif;font-size:24px;font-weight:700}
    .chart-change{font-size:12px;margin-top:2px}
    .bet-card{background:var(--bg2);border:1px solid var(--border);border-radius:10px;padding:18px;position:relative;overflow:hidden;transition:all 0.3s}
    .bet-card.active{border-color:rgba(0,187,255,0.3);animation:bcGlow 3s ease infinite}@keyframes bcGlow{0%,100%{box-shadow:0 0 0 rgba(0,187,255,0)}50%{box-shadow:0 0 30px rgba(0,187,255,0.08)}}
    .bet-card.active::before{content:'';position:absolute;top:0;left:0;width:100%;height:2px;background:linear-gradient(90deg,var(--cyan),var(--purple))}
    .bet-card.empty{display:flex;align-items:center;justify-content:center;min-height:140px}
    .bet-ticker{font-size:10px;color:var(--cyan);letter-spacing:1.5px;font-weight:600}.bet-title{font-family:'Outfit',sans-serif;font-size:14px;font-weight:600;margin:6px 0}
    .bet-grid{display:grid;grid-template-columns:1fr 1fr;gap:8px;margin-top:12px}
    .bet-stat{background:var(--bg3);border-radius:6px;padding:10px}.bet-stat-label{font-size:9px;color:var(--dim);letter-spacing:1px;text-transform:uppercase}.bet-stat-value{font-family:'Outfit',sans-serif;font-size:16px;font-weight:700;margin-top:4px}
    .stat-row{display:flex;justify-content:space-between;padding:10px 0;border-bottom:1px solid rgba(30,30,58,0.5)}.stat-row:last-child{border-bottom:none}.stat-label{color:var(--dim);font-size:12px}.stat-value{font-weight:600;font-variant-numeric:tabular-nums;font-size:13px}
    .log-panel{grid-column:1/-1;max-height:280px}
    .log-entries{max-height:230px;overflow-y:auto;font-size:11px;scrollbar-width:thin;scrollbar-color:var(--bg4) transparent}
    .log-entries::-webkit-scrollbar{width:4px}.log-entries::-webkit-scrollbar-thumb{background:var(--bg4);border-radius:2px}
    .log-entry{display:flex;gap:12px;padding:5px 0;border-bottom:1px solid rgba(30,30,58,0.2);animation:logSlide 0.3s ease}@keyframes logSlide{from{opacity:0;transform:translateY(-8px)}}
    .log-time{color:var(--muted);min-width:75px;font-size:10px}.log-type{min-width:90px;font-weight:700;font-size:10px;letter-spacing:0.5px}.log-msg{color:var(--dim);flex:1}
    .log-type.START,.log-type.RUNNING{color:var(--green)}.log-type.BET,.log-type.ORDER,.log-type.BETTING{color:var(--purple)}.log-type.SCAN,.log-type.STRATEGY,.log-type.SCANNING{color:var(--cyan)}.log-type.ERROR,.log-type.ORDER_ERROR{color:var(--red)}.log-type.SIM_WIN{color:var(--green)}.log-type.SIM_LOSS{color:var(--red)}.log-type.DESTRUCT,.log-type.NUKE{color:var(--red)}.log-type.SKIP,.log-type.WAITING,.log-type.DRY_RUN{color:var(--yellow)}
    .toast-container{position:fixed;top:70px;right:20px;z-index:20;display:flex;flex-direction:column;gap:8px}
    .toast{padding:10px 16px;border-radius:8px;font-size:12px;font-weight:600;backdrop-filter:blur(20px);animation:toastIn 0.3s ease,toastOut 0.3s ease 3s forwards;max-width:320px;border:1px solid}
    .toast.win{background:rgba(0,255,136,0.1);border-color:rgba(0,255,136,0.3);color:var(--green)}.toast.loss{background:rgba(255,34,102,0.1);border-color:rgba(255,34,102,0.3);color:var(--red)}.toast.info{background:rgba(0,187,255,0.1);border-color:rgba(0,187,255,0.3);color:var(--cyan)}
    @keyframes toastIn{from{opacity:0;transform:translateX(40px)}}@keyframes toastOut{to{opacity:0;transform:translateX(40px)}}
    .overlay{display:none;position:fixed;inset:0;z-index:100;justify-content:center;align-items:center;flex-direction:column}.overlay.active{display:flex}
    .overlay-bg{position:absolute;inset:0;background:rgba(0,0,0,0.92);backdrop-filter:blur(10px)}.overlay-content{position:relative;text-align:center}
    .destruct-icon{font-size:80px;animation:shake 0.15s infinite}.destruct-title{font-family:'Outfit',sans-serif;font-size:36px;font-weight:900;color:var(--red);letter-spacing:6px;margin-top:16px;text-shadow:0 0 40px var(--rg)}
    .target-icon{font-size:90px}.target-title{font-family:'Outfit',sans-serif;font-size:42px;font-weight:900;color:var(--green);letter-spacing:5px;margin-top:16px;text-shadow:0 0 50px var(--gg)}.target-amount{font-family:'Outfit',sans-serif;font-size:64px;font-weight:900;color:var(--green);margin-top:8px}
    @media(max-width:768px){.top-bar{flex-wrap:wrap}.top-stat{flex:1 1 50%}.main-grid{grid-template-columns:1fr}.chart-panel,.log-panel{grid-column:1}.cd-digits{font-size:32px}}
  </style>
</head>
<body>
  <div class="bg-grid"></div><div class="bg-glow g1"></div><div class="bg-glow g2"></div>
  <canvas id="particles"></canvas>
  <div class="content">
    <div class="header">
      <div class="logo"><span class="logo-icon">üé∞</span><div><h1>YOLO ENGINE</h1><div class="sub">$100 ‚Üí $10,000 OR SELF-DESTRUCT</div></div></div>
      <div class="header-right">
        <span id="stateBadge" class="state-badge state-IDLE">IDLE</span>
        <button class="btn go" onclick="sendAction('start')">‚ñ∂ START</button>
        <button class="btn" onclick="sendAction('pause')">‚è∏</button>
        <button class="btn" onclick="sendAction('resume')">‚ñ∂</button>
        <button class="btn danger" onclick="sendAction('stop')">‚ñ†</button>
      </div>
    </div>
    <div class="ticker-tape"><div class="ticker-content" id="tickerContent">
      <span class="ticker-item"><span class="ticker-dot c"></span> YOLO ENGINE v1.0</span>
      <span class="ticker-item"><span class="ticker-dot g"></span> TARGET: $10,000</span>
      <span class="ticker-item"><span class="ticker-dot c"></span> MODE: EDGE HUNTER</span>
      <span class="ticker-item"><span class="ticker-dot g"></span> SCANNING MARKETS</span>
      <span class="ticker-item"><span class="ticker-dot c"></span> YOLO ENGINE v1.0</span>
      <span class="ticker-item"><span class="ticker-dot g"></span> TARGET: $10,000</span>
      <span class="ticker-item"><span class="ticker-dot c"></span> MODE: EDGE HUNTER</span>
      <span class="ticker-item"><span class="ticker-dot g"></span> SCANNING MARKETS</span>
    </div></div>
    <div class="top-bar">
      <div class="top-stat"><div class="top-stat-label">‚è± COUNTDOWN</div><div style="text-align:center">
        <div id="countdown" class="cd-digits normal"><span id="cdH">48</span><span class="sep">:</span><span id="cdM">00</span><span class="sep">:</span><span id="cdS">00</span></div>
        <div class="cd-label">UNTIL SELF-DESTRUCT</div>
        <div class="time-bar"><div id="timeBar" class="time-bar-fill" style="width:0%;background:var(--cyan)"></div></div>
      </div></div>
      <div class="top-stat"><div class="top-stat-label">üí∞ BANKROLL</div><div>
        <div id="bankroll" class="bv neutral" style="font-size:42px">$100.00</div>
        <div style="margin-top:6px"><span id="pnlBadge" class="pnl flat">+$0.00 (0.0%)</span></div>
        <div style="font-size:11px;color:var(--dim);margin-top:8px">Target: $10,000</div>
        <div class="target-track"><div id="targetBar" class="target-fill" style="width:1%"></div></div>
      </div></div>
      <div class="top-stat"><div class="top-stat-label">üìä PERFORMANCE</div><div>
        <div style="display:flex;justify-content:space-between;margin-bottom:8px">
          <div><div style="font-size:9px;color:var(--dim);letter-spacing:1px">PEAK</div><div id="peak" style="font-family:'Outfit',sans-serif;font-size:20px;font-weight:700;color:var(--green)">$100.00</div></div>
          <div style="text-align:right"><div style="font-size:9px;color:var(--dim);letter-spacing:1px">WIN RATE</div><div id="winRate" style="font-family:'Outfit',sans-serif;font-size:20px;font-weight:700">‚Äî</div></div>
        </div>
        <div id="wlBar" class="wl-bar"></div>
        <div style="display:flex;justify-content:space-between;margin-top:6px;font-size:10px"><span style="color:var(--green)" id="winCount">0 W</span><span style="color:var(--dim)" id="betCount">0 bets</span><span style="color:var(--red)" id="lossCount">0 L</span></div>
      </div></div>
      <div class="top-stat"><div class="top-stat-label">üéØ STRATEGY</div><div>
        <div id="stratMode" style="font-family:'Outfit',sans-serif;font-size:20px;font-weight:700;color:var(--cyan);text-transform:uppercase">Edge Hunter</div>
        <div class="stat-row" style="padding:6px 0"><span class="stat-label" style="font-size:10px">Wagered</span><span id="wagered" class="stat-value" style="font-size:11px">$0.00</span></div>
        <div class="stat-row" style="padding:6px 0;border:none"><span class="stat-label" style="font-size:10px">Positions</span><span id="posCount" class="stat-value" style="font-size:11px">0</span></div>
      </div></div>
    </div>
    <div class="main-grid">
      <div class="panel chart-panel">
        <div class="panel-header"><div class="panel-title"><div class="live-dot"></div> P&L CHART ‚Äî LIVE</div></div>
        <div class="chart-wrap"><canvas id="plChart"></canvas>
          <div class="chart-overlay"><div id="chartPrice" class="chart-price" style="color:var(--green)">$100.00</div><div id="chartChange" class="chart-change" style="color:var(--green)">+0.00%</div></div>
        </div>
      </div>
      <div class="panel">
        <div class="panel-header"><div class="panel-title">üé≤ ACTIVE POSITION</div></div>
        <div id="activeBet"><div class="bet-card empty"><div style="color:var(--muted);font-size:12px;letter-spacing:1px">AWAITING SIGNAL...</div></div></div>
      </div>
      <div class="panel">
        <div class="panel-header"><div class="panel-title">üìã RECENT BETS</div></div>
        <div id="recentBets" style="max-height:180px;overflow-y:auto"><div style="color:var(--muted);font-size:11px;text-align:center;padding:40px 0">No bets yet</div></div>
      </div>
      <div class="panel log-panel">
        <div class="panel-header"><div class="panel-title"><div class="live-dot"></div> EVENT LOG</div><div style="font-size:10px;color:var(--dim)" id="logCount">0 events</div></div>
        <div id="logEntries" class="log-entries"></div>
      </div>
    </div>
  </div>
  <div id="toasts" class="toast-container"></div>
  <div id="destructOverlay" class="overlay"><div class="overlay-bg"></div><div class="overlay-content"><div class="destruct-icon">üíÄ</div><div class="destruct-title">SELF-DESTRUCT</div><div id="destructReason" style="color:var(--dim);margin-top:12px;font-size:14px">Time expired</div><div id="destructFinal" style="color:var(--dim);margin-top:16px;font-size:16px"></div></div></div>
  <div id="targetOverlay" class="overlay"><div class="overlay-bg"></div><div class="overlay-content"><div class="target-icon">üéâ</div><div class="target-title">TARGET HIT</div><div id="finalAmount" class="target-amount">$10,000.00</div><div style="color:var(--dim);margin-top:10px;font-size:14px">The absolute madlad did it.</div></div></div>
<script>
let ws=null,status={},plHistory=[100],START=100,lastBR=100,logN=0,localCD=null,cdTicker=null,betHist=[];
const pC=document.getElementById('particles'),pX=pC.getContext('2d');let pts=[];
function initP(){pC.width=window.innerWidth;pC.height=window.innerHeight;pts=[];for(let i=0;i<40;i++)pts.push({x:Math.random()*pC.width,y:Math.random()*pC.height,vx:(Math.random()-0.5)*0.3,vy:(Math.random()-0.5)*0.3,r:Math.random()*1.5+0.5,o:Math.random()*0.3+0.05})}
function drawP(){pX.clearRect(0,0,pC.width,pC.height);for(const p of pts){p.x+=p.vx;p.y+=p.vy;if(p.x<0)p.x=pC.width;if(p.x>pC.width)p.x=0;if(p.y<0)p.y=pC.height;if(p.y>pC.height)p.y=0;pX.beginPath();pX.arc(p.x,p.y,p.r,0,Math.PI*2);pX.fillStyle=`rgba(0,187,255,${p.o})`;pX.fill()}
for(let i=0;i<pts.length;i++)for(let j=i+1;j<pts.length;j++){const dx=pts[i].x-pts[j].x,dy=pts[i].y-pts[j].y,d=Math.sqrt(dx*dx+dy*dy);if(d<150){pX.beginPath();pX.moveTo(pts[i].x,pts[i].y);pX.lineTo(pts[j].x,pts[j].y);pX.strokeStyle=`rgba(0,187,255,${0.04*(1-d/150)})`;pX.stroke()}}
requestAnimationFrame(drawP)}initP();drawP();window.addEventListener('resize',initP);
function connect(){const p=location.protocol==='https:'?'wss':'ws';ws=new WebSocket(`${p}://${location.host}`);ws.onopen=()=>showToast('Connected to YOLO Engine','info');ws.onmessage=e=>handleMsg(JSON.parse(e.data));ws.onclose=()=>setTimeout(connect,3000);ws.onerror=()=>{}}
function sendAction(a){if(ws?.readyState===1)ws.send(JSON.stringify({action:a}));else fetch(`/api/${a}`,{method:'POST'})}
function handleMsg(m){switch(m.type){case'status':updateStatus(m.data);break;case'log':addLog(m.data);break;case'bet_signal':updateBet(m.data.bet);break;case'bet_result':handleResult(m.data);break;
case'self_destruct_initiated':document.getElementById('destructOverlay').classList.add('active');document.getElementById('destructReason').textContent=m.data.reason||'Unknown';break;
case'self_destruct_complete':document.getElementById('destructFinal').textContent=`Final: $${m.data.bankrollDollars} | Peak: $${m.data.peakBankrollDollars}`;break;
case'target_hit':document.getElementById('targetOverlay').classList.add('active');document.getElementById('finalAmount').textContent=`$${parseFloat(m.data.bankrollDollars).toLocaleString('en-US',{minimumFractionDigits:2})}`;break;
case'order_placed':showToast('Order placed','info');break;case'error':addLog({type:'ERROR',message:m.data.message||'Unknown',timestamp:Date.now()});break}}
function updateStatus(d){status=d;
const b=document.getElementById('stateBadge');b.textContent=d.state;b.className=`state-badge state-${d.state}`;
localCD=d.timeRemaining;if(!cdTicker)cdTicker=setInterval(tickCD,1000);renderCD();
const dollars=parseFloat(d.bankrollDollars||'100'),bEl=document.getElementById('bankroll');
bEl.textContent=`$${dollars.toLocaleString('en-US',{minimumFractionDigits:2})}`;
const isUp=dollars>START,isDn=dollars<START;bEl.className=`bv ${isUp?'profit':isDn?'loss':'neutral'}`;
if(dollars!==lastBR){bEl.classList.add(dollars>lastBR?'flash-g':'flash-r');setTimeout(()=>bEl.classList.remove('flash-g','flash-r'),500);lastBR=dollars}
const ch=dollars-START,pct=((ch/START)*100).toFixed(1),pnl=document.getElementById('pnlBadge');
pnl.textContent=`${ch>=0?'+':''}$${ch.toFixed(2)} (${pct}%)`;pnl.className=`pnl ${ch>0?'up':ch<0?'down':'flat'}`;
document.getElementById('targetBar').style.width=Math.max(d.progress||0,0.5)+'%';
document.getElementById('peak').textContent=`$${d.peakBankrollDollars||'100.00'}`;
const s=d.stats||{};document.getElementById('winRate').textContent=s.totalBets>0?(s.winRate*100).toFixed(0)+'%':'‚Äî';
document.getElementById('winRate').style.color=s.winRate>0.5?'var(--green)':s.winRate>0?'var(--yellow)':'var(--text)';
document.getElementById('winCount').textContent=`${s.wins||0} W`;document.getElementById('lossCount').textContent=`${s.losses||0} L`;document.getElementById('betCount').textContent=`${s.totalBets||0} bets`;
const wl=document.getElementById('wlBar');if((s.wins||0)+(s.losses||0)>0)wl.innerHTML=Array(s.wins||0).fill('<div class="w"></div>').join('')+Array(s.losses||0).fill('<div class="l"></div>').join('');
document.getElementById('stratMode').textContent=(d.strategy||'edge_hunter').replace('_',' ');
document.getElementById('wagered').textContent=`$${((s.totalWagered||0)/100).toFixed(2)}`;document.getElementById('posCount').textContent=d.positionCount||0;
plHistory.push(dollars);if(plHistory.length>200)plHistory.shift();drawChart();
document.getElementById('chartPrice').textContent=`$${dollars.toFixed(2)}`;document.getElementById('chartPrice').style.color=isUp?'var(--green)':isDn?'var(--red)':'var(--text)';
document.getElementById('chartChange').textContent=`${ch>=0?'+':''}${pct}%`;document.getElementById('chartChange').style.color=isUp?'var(--green)':isDn?'var(--red)':'var(--dim)';
if(d.eventLog?.length>0&&document.getElementById('logEntries').children.length===0)d.eventLog.forEach(addLog)}
function tickCD(){if(localCD!=null&&localCD>0){localCD-=1000;renderCD()}}
function renderCD(){if(localCD==null)return;const ms=Math.max(localCD,0),h=Math.floor(ms/3600000),m=Math.floor((ms%3600000)/60000),s=Math.floor((ms%60000)/1000);
document.getElementById('cdH').textContent=String(h).padStart(2,'0');document.getElementById('cdM').textContent=String(m).padStart(2,'0');document.getElementById('cdS').textContent=String(s).padStart(2,'0');
document.getElementById('countdown').className=`cd-digits ${h<4?'critical':h<12?'warning':'normal'}`;
const maxMs=48*3600000,elapsed=maxMs-ms,pct=Math.min((elapsed/maxMs)*100,100),bar=document.getElementById('timeBar');bar.style.width=pct+'%';bar.style.background=pct>90?'var(--red)':pct>75?'var(--yellow)':'var(--cyan)'}
function updateBet(bet){if(!bet)return;document.getElementById('activeBet').innerHTML=`
<div class="bet-card active"><div class="bet-ticker">${bet.ticker}</div><div class="bet-title">${bet.title||bet.ticker}</div>
<div class="bet-grid"><div class="bet-stat"><div class="bet-stat-label">SIDE</div><div class="bet-stat-value" style="color:${bet.side==='yes'?'var(--green)':'var(--red)'}">${bet.side.toUpperCase()}</div></div>
<div class="bet-stat"><div class="bet-stat-label">CONTRACTS</div><div class="bet-stat-value">${bet.numContracts}</div></div>
<div class="bet-stat"><div class="bet-stat-label">COST</div><div class="bet-stat-value">$${(bet.totalCost/100).toFixed(2)}</div></div>
<div class="bet-stat"><div class="bet-stat-label">POTENTIAL</div><div class="bet-stat-value" style="color:var(--green)">${bet.potentialMultiple}x</div></div></div>
<div style="margin-top:10px;font-size:9px;color:var(--muted);letter-spacing:0.5px">${bet.strategy} ¬∑ score ${bet.compositeScore} ¬∑ urgency ${bet.urgency}%</div></div>`}
function handleResult(d){const w=d.outcome==='win';showToast(`${w?'üü¢ WIN':'üî¥ LOSS'} ${d.ticker} ‚Äî ${w?'+':'-'}$${(Math.abs(d.profit)/100).toFixed(2)}`,w?'win':'loss');betHist.unshift(d);if(betHist.length>20)betHist.pop();renderBets()}
function renderBets(){document.getElementById('recentBets').innerHTML=betHist.map(b=>{const w=b.outcome==='win';return`<div style="display:flex;justify-content:space-between;align-items:center;padding:6px 0;border-bottom:1px solid rgba(30,30,58,0.3);font-size:11px"><span style="color:${w?'var(--green)':'var(--red)'}">${w?'‚úì':'‚úó'}</span><span style="color:var(--dim);flex:1;margin-left:8px">${(b.ticker||'‚Äî').slice(0,20)}</span><span style="color:${w?'var(--green)':'var(--red)'};font-weight:600">${w?'+':'-'}$${(Math.abs(b.profit||0)/100).toFixed(2)}</span></div>`}).join('')}
function addLog(e){const el=document.getElementById('logEntries'),div=document.createElement('div');div.className='log-entry';
div.innerHTML=`<span class="log-time">${e.timestamp?new Date(e.timestamp).toLocaleTimeString():''}</span><span class="log-type ${e.type||''}">${e.type||'?'}</span><span class="log-msg">${e.message||''}</span>`;
el.appendChild(div);el.scrollTop=el.scrollHeight;while(el.children.length>200)el.removeChild(el.firstChild);logN++;document.getElementById('logCount').textContent=`${logN} events`}
function showToast(t,type='info'){const c=document.getElementById('toasts'),d=document.createElement('div');d.className=`toast ${type}`;d.textContent=t;c.appendChild(d);setTimeout(()=>d.remove(),3500)}
function drawChart(){const canvas=document.getElementById('plChart'),ctx=canvas.getContext('2d'),box=canvas.parentElement,dpr=window.devicePixelRatio||1;
canvas.width=box.offsetWidth*dpr;canvas.height=box.offsetHeight*dpr;canvas.style.width=box.offsetWidth+'px';canvas.style.height=box.offsetHeight+'px';ctx.scale(dpr,dpr);
const w=box.offsetWidth,h=box.offsetHeight,data=plHistory,len=data.length;if(len<2)return;
const min=Math.min(...data)*0.92,max=Math.max(...data,START*1.05)*1.08,range=max-min||1;ctx.clearRect(0,0,w,h);
ctx.strokeStyle='rgba(30,30,58,0.4)';ctx.lineWidth=0.5;for(let i=0;i<=4;i++){const y=(h/4)*i;ctx.beginPath();ctx.moveTo(0,y);ctx.lineTo(w,y);ctx.stroke();
ctx.fillStyle='rgba(85,85,119,0.5)';ctx.font='9px JetBrains Mono';ctx.textAlign='right';ctx.fillText(`$${(max-(range/4)*i).toFixed(0)}`,w-6,y+12)}
const startY=h-((START-min)/range)*h;ctx.strokeStyle='rgba(255,255,255,0.06)';ctx.setLineDash([4,6]);ctx.beginPath();ctx.moveTo(0,startY);ctx.lineTo(w,startY);ctx.stroke();ctx.setLineDash([]);
const points=data.map((v,i)=>({x:(i/(len-1))*w,y:h-((v-min)/range)*h})),last=data[len-1],isP=last>=START,lc=isP?'#00ff88':'#ff2266',gc=isP?'rgba(0,255,136,0.4)':'rgba(255,34,102,0.4)';
ctx.beginPath();ctx.strokeStyle=gc;ctx.lineWidth=6;ctx.filter='blur(4px)';points.forEach((p,i)=>i===0?ctx.moveTo(p.x,p.y):ctx.lineTo(p.x,p.y));ctx.stroke();ctx.filter='none';
ctx.beginPath();ctx.strokeStyle=lc;ctx.lineWidth=2;ctx.lineJoin='round';points.forEach((p,i)=>i===0?ctx.moveTo(p.x,p.y):ctx.lineTo(p.x,p.y));ctx.stroke();
const grad=ctx.createLinearGradient(0,0,0,h);grad.addColorStop(0,isP?'rgba(0,255,136,0.12)':'rgba(255,34,102,0.12)');grad.addColorStop(0.5,isP?'rgba(0,255,136,0.03)':'rgba(255,34,102,0.03)');grad.addColorStop(1,'transparent');
ctx.beginPath();points.forEach((p,i)=>i===0?ctx.moveTo(p.x,p.y):ctx.lineTo(p.x,p.y));ctx.lineTo(w,h);ctx.lineTo(0,h);ctx.closePath();ctx.fillStyle=grad;ctx.fill();
const lp=points[points.length-1];ctx.beginPath();ctx.arc(lp.x,lp.y,4,0,Math.PI*2);ctx.fillStyle=lc;ctx.fill();
ctx.beginPath();ctx.arc(lp.x,lp.y,8,0,Math.PI*2);ctx.strokeStyle=lc;ctx.lineWidth=1;ctx.globalAlpha=0.3;ctx.stroke();ctx.globalAlpha=1;
ctx.strokeStyle=`${lc}33`;ctx.setLineDash([3,3]);ctx.beginPath();ctx.moveTo(lp.x,lp.y);ctx.lineTo(w,lp.y);ctx.stroke();ctx.setLineDash([])}
connect();setTimeout(drawChart,200);window.addEventListener('resize',drawChart);
setInterval(async()=>{if(!ws||ws.readyState!==1)try{updateStatus(await(await fetch('/api/status')).json())}catch{}},5000);
</script>
</body>
</html>
